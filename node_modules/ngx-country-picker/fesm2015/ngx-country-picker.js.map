{"version":3,"file":"ngx-country-picker.js","sources":["ng://ngx-country-picker/country-picker.config.ts","ng://ngx-country-picker/country-picker.service.ts","ng://ngx-country-picker/country-picker.component.ts","ng://ngx-country-picker/country-picker.module.ts","ng://ngx-country-picker/ngx-country-picker.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const COUNTRY_PICKER_CONFIG = new InjectionToken<CountryPickerConfig>('countrypicker.config');\n\nexport interface CountryPickerConfig {\n  baseUrl: string;\n  filename: string;\n}\n\nexport const COUNTRY_PICKER_CONFIG_DEFAULT: CountryPickerConfig = {\n  baseUrl: 'assets/',\n  filename: 'countries.json',\n};\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { COUNTRY_PICKER_CONFIG, CountryPickerConfig } from './country-picker.config';\nimport { ICountry } from './country.interface';\n\n@Injectable()\nexport class CountryPickerService {\n\n  private readonly _baseUrl: string;\n  private readonly _filename: string;\n  private _data: Observable<ICountry[]> | null = null;\n\n  protected static handleError(error: HttpResponse<any> | any): Observable<any> {\n    let errMsg: string;\n    if (error instanceof HttpResponse) {\n      if (error.status === 404) {\n        errMsg = 'Error loading countries.json file.'\n          + ' Please configure WebPack and load countries.json assets to your root folder';\n      } else {\n        const body = error.body || '';\n        const err = body.error || JSON.stringify(body);\n        errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n      }\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.error(errMsg);\n    return throwError(errMsg);\n  }\n\n  constructor(\n    @Inject(COUNTRY_PICKER_CONFIG) config: CountryPickerConfig,\n    private _http: HttpClient\n  ) {\n    this._baseUrl = config.baseUrl;\n    this._filename = config.filename;\n    this._data = this._loadData();\n  }\n\n  public getCountries(): Observable<ICountry[]> {\n    return this._data\n      .pipe(\n        map((countries: ICountry[]) =>\n          countries.map((country: ICountry) => {\n            country.name.native[0] = country.name.native[Object.keys(country.name.native)[0]];\n            return country;\n          })\n        )\n      );\n  }\n\n  public getBaseUrl(): string {\n    return this._baseUrl;\n  }\n\n  private _loadData(): Observable<ICountry[]> {\n    return this._http.get<ICountry[]>(this._baseUrl + this._filename)\n      .pipe(\n        catchError(CountryPickerService.handleError)\n      );\n  }\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\n\nimport { ICountry } from './country.interface';\nimport { CountryPickerService } from './country-picker.service';\n\n@Component({\n  selector: 'country-picker',\n  template: `\n      <select [class]=\"classes\">\n          <option *ngFor=\"let c of countries\" [value]=\"getValue(c)\">\n              <img *ngIf=\"flag\" [src]=\"baseUrl + c.cca3.toLowerCase() + '.svg'\">{{ getName(c) }}\n          </option>\n      </select>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CountryPickerComponent implements OnInit {\n\n  @Input() public flag = false;\n  @Input() public setValue = 'cca3';\n  @Input() public setName = 'name.common';\n  @Input() public classes = ['form-control', 'form-control-sm'];\n\n  public countries: ICountry[] = [];\n  public baseUrl: string;\n\n  constructor(\n    private _countryPickerService: CountryPickerService,\n    private _cdr: ChangeDetectorRef,\n  ) {\n    this.baseUrl = _countryPickerService.getBaseUrl() + 'data/';\n  }\n\n  public ngOnInit(): void {\n    this._countryPickerService.getCountries()\n      .subscribe(countries => {\n        this.countries = countries.sort((a: ICountry, b: ICountry) => {\n          let na = this.getName(a);\n          let nb = this.getName(b);\n          if (na > nb) {\n            return 1;\n          }\n          if (na < nb) {\n            return -1;\n          }\n          return 0;\n        });\n        this._cdr.markForCheck();\n      });\n  }\n\n  public getValue(obj: ICountry): string {\n    return this.setValue.split('.').reduce((o, i) => o[i], obj);\n  }\n\n  public getName(obj: ICountry): string {\n    return this.setName.split('.').reduce((o, i) => o[i], obj);\n  }\n}\n","import { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { COUNTRY_PICKER_CONFIG, COUNTRY_PICKER_CONFIG_DEFAULT, CountryPickerConfig } from './country-picker.config';\nimport { CountryPickerService } from './country-picker.service';\nimport { CountryPickerComponent } from './country-picker.component';\n\nexport function countryPickerServiceFactory(config: CountryPickerConfig, http: HttpClient) {\n  return new CountryPickerService(config, http);\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule\n  ],\n  declarations: [\n    CountryPickerComponent\n  ],\n  exports: [\n    CountryPickerComponent\n  ]\n})\nexport class CountryPickerModule {\n\n  public static forRoot(providedConfig: CountryPickerConfig = COUNTRY_PICKER_CONFIG_DEFAULT): ModuleWithProviders<CountryPickerModule> {\n    return {\n      ngModule: CountryPickerModule,\n      providers: [\n        {provide: COUNTRY_PICKER_CONFIG, useValue: providedConfig},\n        {\n          provide: CountryPickerService,\n          useFactory: countryPickerServiceFactory,\n          deps: [COUNTRY_PICKER_CONFIG, HttpClient]\n        }\n      ]\n    };\n  }\n\n  constructor(@Optional() @SkipSelf() parentModule: CountryPickerModule) {\n    if (parentModule) {\n      throw new Error('CountryPickerModule is already loaded. Import it in the AppModule only');\n    }\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {countryPickerServiceFactory as Éµa} from './country-picker.module';"],"names":["tslib_1.__param","tslib_1.__decorate"],"mappings":"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"}